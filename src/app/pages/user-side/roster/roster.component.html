<!--<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-beat" [fullScreen]="true">-->
<!--  <p style="color: white">Loading...</p>-->
<!--</ngx-spinner>-->
<!--<app-topbar></app-topbar>-->
<!--<app-user-side-bar></app-user-side-bar>-->
<div class="content-container">
  <div class="container-fluid">
    <div class="row mt-3">
      <div class="col-sm">
        <div class="row mb-3">
          <div class="col-sm-4" id="left-side">
            <select name="cars" id="date-chooser" class="select-type"
              (change)="getRoster()">
              <option value="{{team._id}}" *ngFor="let team of allTeams">
                Update Roster for: {{ team.name }}
              </option>
            </select>
          </div>
          <div class="col-sm-4" id="left-side">
            <select name="cars" id="date-chooser" class="select-type" style="width: 220px"
               (change)="getRoster()">
              <option value=1>Call Duty</option>
              <option value=2>Shift Duty</option>
            </select>
          </div>
          <div class="col-sm-2" id="right-side">
            <select name="cars" id="date-chooser">
              <option value="volvo">All Doctors</option>
              <option value="saab">Interns</option>
            </select>
          </div>
          <div class="col-sm-2" id="right-side">
            <select name="cars" id="date-chooser">
              <option value="volvo">Entire Team</option>
              <option value="saab" *ngFor="let person of allPeopleOnCall">
                {{ person }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-sm offset-4">
        <select name="cars" id="date-chooser" class="select-type"
          (change)="getRoster()">
          <option value="00">Month</option>
          <option value="01">January</option>
          <option value="02">February</option>
          <option value="03">March</option>
          <option value="04">April</option>
          <option value="05">May</option>
          <option value="06">June</option>
          <option value="07">July</option>
          <option value="08">August</option>
          <option value="09" selected>September</option>
          <option value="10">October</option>
          <option value="11">November</option>
          <option value="12">December</option>
        </select>
        <select name="cars" id="date-chooser" class="select-type"
          (change)="getRoster()">
          <option value="volvo">Year</option>
          <option value="2021" selected>2021</option>
          <option value="2020">2020</option>
        </select>
        <img src="../../../../assets/icons/dash/download.svg" style="margin-left: 25px;">
<!--        <angular2csv [data]="csvData" filename="roster" [options]="csvOptions" id="date-chooser" class="select-type">-->
<!--        </angular2csv>-->
      </div>
    </div>
    <div id="rosterType" *ngIf="isCallDuty">
      <div class="row mt-3">
        <div class="col-sm">
          <div class="row">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col" class="call">Call</th>
                    <th scope="col" class="call">1ST</th>
                    <th scope="col" class="call">2ND</th>
                    <th scope="col" class="call">3RD</th>
                    <th scope="col" class="call">4TH</th>
                    <th scope="col" class="call">5TH</th>
                    <th scope="col" class="call">6TH</th>
                    <th scope="col" class="call">7TH</th>
                    <th class="col-sm call">8TH</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-1">
        <div class="col-sm">
          <div class="row mb-3">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col" class="call">Date</th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('interns', $event)">
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('medicalOfficer', $event)">
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="interns">Interns</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('consultant2', $event)">
                        <option value="consultant2">Poly Cover</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('registrar1', $event)">
                        <option value="registrar1">Registrar 1</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('registrar2', $event)">
                        <option value="registrar2">Registrar 2</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('registrar3', $event)">
                        <option value="registrar3">Registrar 3</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('consultant', $event)">
                        <option value="consultant">Consultant</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                      </select>
                    </th>
                    <th scope="col">
                      Add
                    </th>
                    <!-- <th class="col-sm" *ngFor="let i of [].constructor(frequency)" (click)="addExtraColumn()">
                      <select name="title" class="title" (change)="copyRoleItems('consultant', $event)">
                        <option value="consultant">Consultant</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                      </select>
                    </th> -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ro of expCall" data-toggle="modal" data-target="#exampleModal">
                    <td>
                      <b>{{ ro.date }}</b>
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'interns')">
                      {{ ro.data.interns }}
                    </td>
                    <td class="item" data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'medicalOfficer')">
                      {{ ro.data.medicalOfficer }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'consultant2')">
                      {{ ro.data.consultant2 }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'registrar1')">
                      {{ ro.data.registrar1 }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'registrar2')">
                      {{ ro.data.registrar2 }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'registrar3')">
                      {{ ro.data.registrar3 }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'consultant')">
                      {{ ro.data.consultant }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal" (click)="getRosterUsersToAdd(ro.date, '')"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="rosterType" *ngIf="!isCallDuty">
      <div class="row mt-3">
        <div class="col-sm">
          <div class="row">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col" class="call">Call</th>
                    <th scope="col" class="call">1ST</th>
                    <th scope="col" class="call">2ND</th>
                    <th scope="col" class="call">3RD</th>
                    <th scope="col" class="call">4TH</th>
                    <th scope="col" class="call">5TH</th>

                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-1">
        <div class="col-sm">
          <div class="row mb-3">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col" class="call">Date</th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('interns', $event)">
                        <option value="interns">Morning</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('medicalOfficer', $event)">
                        <option value="medicalOfficer">Afternoon</option>
                        <option value="interns">Interns</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('consultant2', $event)">
                        <option value="consultant2">Night</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="registrar1">Registrar 1</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th scope="col">
                      <select name="title" class="title" (change)="copyRoleItems('registrar1', $event)">
                        <option value="registrar1">Off</option>
                        <option value="interns">Interns</option>
                        <option value="medicalOfficer">Medical Officer</option>
                        <option value="consultant2">Poly Cover</option>
                        <option value="registrar2">Registrar 2</option>
                        <option value="registrar3">Registrar 3</option>
                        <option value="consultant">Consultant</option>
                      </select>
                    </th>
                    <th class="col-sm">+ Add shift</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ro of expCall" data-toggle="modal" data-target="#exampleModal">
                    <td>
                      <b>{{ ro.date }}</b>
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'morning')">
                      {{ ro.data.morning }}
                    </td>
                    <td class="item" data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'afternoon')">
                      {{ ro.data.afternoon }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'night')">
                      {{ ro.data.night }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal"
                      (click)="getRosterUsersToAdd(ro.date, 'off')">
                      {{ ro.data.off }}
                    </td>
                    <td data-toggle="modal" data-target="#exampleModal" (click)="getRosterUsersToAdd(ro.date, '')"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" style="border-bottom: 0 none">
          <h6 class="modal-title">Select People on call</h6>
          <!-- <select name="cars" id="date-chooser" (change)="focusSelectedGroupOption($event.target)">
            <option value="interns">Interns</option>
            <option value="medicalOfficer">Medical Officer</option>
            <option value="consultant2">Poly Cover</option>
            <option value="registrar1">Registrar 1</option>
            <option value="registrar2">Registrar 2</option>
            <option value="registrar3">Registrar 3</option>
            <option value="consultant">Consultant</option>
          </select> -->
        </div>
        <div class="modal-header">
          <input type="text" class="form-control search search-item" id="name" placeholder="Type Name" (ngModelChange)="searchByName()" />
          <input type="text" class="form-control search-item" id="phone" placeholder="Phone number or email" (ngModelChange)="searchByEmail()" />
        </div>
        <div class="modal-body">
          <div class="row" *ngFor="let user of currentSelectedGroup" style="border-bottom: 2px solid #fafafa"
            data-toggle="tooltip" data-placement="top" title="{{user.phoneNumber}}">
            <div class="col-1 mt-3">
              <img src="../../../../assets//icons/dash/profile.png" class="img-rounded" alt="Avatar"
                style="width: 50px" />
            </div>
            <div class="col-9 mb-4 mt-4" style="margin-top: 5px">
              {{ user.name  }} <br />
              <span id="currentRank">{{ currentRankSelection }}</span>
            </div>
            <div class="col-2 mt-3" style="margin-top: 5px">
              <input type="checkbox" class="checkbox mt-3 form-check-input" id="checkbox-1" checked *ngIf="user.onDuty"
                (change)="addOrRemoveFromSelectedGroup(user, $event)" data-toggle="tooltip" data-placement="top"
                title="{{user.email}}" />
              <input type="checkbox" class="checkbox mt-3 form-check-input" id="checkbox-2" *ngIf="!user.onDuty"
                (change)="addOrRemoveFromSelectedGroup(user, $event)" data-toggle="tooltip" data-placement="top"
                title="{{user.email}}" />
            </div>
          </div>
        </div>
        <div class="modal-footer" style="border-top: 0 none">
          <button type="button" class="btn btn-primary" id="save-button" (click)="addToRoster()">
            Save
          </button>
        </div>
      </div>
    </div>
  </div>



  <!-- Modal -->
  <div class="modal fade" id="shiftModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" style="border-bottom: 0 none">
          <h6 class="modal-title">Pattern</h6>
        </div>
        <div class="modal-header">
          <!-- placeholder area -->
        </div>
        <div class="modal-body">
          <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
            <option value="" disabled selected>e.g Morning/Afternoon/Night/Off</option>
            <option value="Morning">
              Morning
            </option>
            <option value="Afternoon">
              Afternoon
            </option>
            <option value="Night">
              Night
            </option>
            <option value="Off">
              OFF
            </option>
          </select>
          <div class="col mb-4">
            Shift 1 - Morning
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <p>Frequency</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 3 Times</option>
                <option value="1">
                  1
                </option>
                <option value="2">
                  2
                </option>
                <option value="3">
                  3
                </option>
              </select>
            </div>
            <div class="col-6">
              <p>Time</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 8am-5pm</option>
                <option value="Morning">
                  8.00 am to 2.00 pm
                </option>
                <option value="8.00 am - 2.00pm">
                  8.00 am to 2.00 pm
                </option>
              </select>
            </div>
          </div>
          <div class="col mb-4">
            Shift 2 - Afternoon
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <p>Frequency</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 3 Times</option>
                <option value="1">
                  1
                </option>
                <option value="2">
                  2
                </option>
                <option value="3">
                  3
                </option>
              </select>
            </div>
            <div class="col-6">
              <p>Time</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 8am-5pm</option>
                <option value="Morning">
                  8.00 am to 2.00 pm
                </option>
                <option value="8.00 am - 2.00pm">
                  8.00 am to 2.00 pm
                </option>
              </select>
            </div>
          </div>
          <div class="col mb-4">
            Shift 3 - Night
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <p>Frequency</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 3 Times</option>
                <option value="1">
                  1
                </option>
                <option value="2">
                  2
                </option>
                <option value="3">
                  3
                </option>
              </select>
            </div>
            <div class="col-6">
              <p>Time</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 8am-5pm</option>
                <option value="Morning">
                  8.00 am to 2.00 pm
                </option>
                <option value="8.00 am - 2.00pm">
                  8.00 am to 2.00 pm
                </option>
              </select>
            </div>
          </div>
          <div class="col mb-4">
            Shift 4 - Off
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <p>Frequency</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 3 Times</option>
                <option value="1">
                  1
                </option>
                <option value="2">
                  2
                </option>
                <option value="3">
                  3
                </option>
              </select>
            </div>
            <div class="col-6">
              <p>Time</p>
              <select class="form-select  select-item mb-3" id="name" (change)="getRoster()">
                <option value="" disabled selected>e.g 8am-5pm</option>
                <option value="Morning">
                  8.00 am to 2.00 pm
                </option>
                <option value="8.00 am - 2.00pm">
                  8.00 am to 2.00 pm
                </option>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="border-top: 0 none">
          <button type="button" class="btn btn-primary" id="save-button">
            Save Pattern
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
